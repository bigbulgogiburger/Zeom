# PRD: 천지연꽃신당 Gap Analysis & Feature Roadmap v1

> **작성일**: 2026-02-21
> **작성자**: PM Agent (특급 IT PM 분석)
> **분석 범위**: Backend (85%), Frontend (88%), Flutter (70%), 경쟁사 9개 플랫폼 벤치마킹
> **문서 목적**: 현재 구현 대비 부족한 기능, 경쟁사 대비 격차, 신규 개발 필요 기능 도출

---

## Executive Summary

천지연꽃신당은 핵심 사용자 플로우(회원가입 → 상담사 탐색 → 예약 → 결제 → 상담 → 리뷰)가 **95% 완성**된 상태이다. 그러나 경쟁사 벤치마킹 결과, **사용자 획득(Acquisition)**, **전환(Conversion)**, **리텐션(Retention)**, **수익화(Monetization)** 4개 축에서 유의미한 격차가 존재한다.

### 시장 컨텍스트

| 지표 | 수치 |
|------|------|
| 한국 온라인 점술 시장 규모 | ~1.4조원 (추적 가능) / ~4조원 (현금 포함 추정) |
| 시장 성장률 | YoY 25% (MZ세대 중심) |
| 1위 사주나루 매출 | 4,000억원 (2024) |
| 1위 점신 사용자 | 1,900만 누적 |
| 핵심 트렌드 | AI 콘텐츠(획득) + 인간 상담(수익화) 하이브리드 |

### 우리의 핵심 차별점 (이미 보유)
- **영상 상담** — 점술 플랫폼 중 출장도사만 보유, 우리가 2번째 (Sendbird Calls)
- **크레딧 기반 과금** — 분당 과금이 아닌 30분 단위 크레딧 (예측 가능한 비용)
- **한국 전통 디자인 시스템** — 금색/먹색 토큰 기반 UI (차별화된 브랜드 경험)

---

## Part 1: 현재 구현 상태 종합 진단

### 1.1 기능별 완성도 매트릭스

| 도메인 | Backend | Frontend | Flutter | 경쟁사 대비 |
|--------|---------|----------|---------|-------------|
| 인증/회원관리 | 95% | 90% | 80% | 소셜 로그인 미구현 (필수) |
| 상담사 탐색 | 95% | 95% | 90% | 실시간 접속 상태 미표시 |
| 예약/슬롯 | 90% | 90% | 85% | 예약 변경/취소 정책 미흡 |
| 결제 | 92% | 85% | 40% | 결제 수단 다양화 미흡 |
| 화상 상담 | 95% | 90% | 50% | 상담 녹화/요약 부재 |
| 리뷰 | 95% | 85% | 80% | 리뷰 인센티브 부재 |
| 지갑/캐시 | 93% | 85% | 70% | 영수증 생성 미구현 |
| 정산 | 75% | 70% | 0% | 자동 정산/은행 이체 미구현 |
| 환불 | 90% | 80% | 70% | 정상 작동 |
| 분쟁 | 75% | 60% | 0% | 해결 워크플로우 미완성 |
| 알림 | 90% | 70% | 0% | 푸시 알림 미구현 |
| 관리자 | 85% | 80% | N/A | 분석 대시보드 미구현 |
| 상담사 포털 | 90% | 90% | 0% | 정상 작동 |
| 추천 | 95% | 80% | 0% | AI 매칭 알고리즘 기본 |
| 쿠폰 | 90% | 30% | 0% | UI 미완성 |
| 추천인 | 80% | 20% | 0% | 보상 지급 미구현 |
| 찜 | 95% | 80% | 0% | 정상 작동 |

### 1.2 치명적 미구현 항목 (Production Blocker)

| # | 항목 | 현황 | 위험도 |
|---|------|------|--------|
| 1 | 정산 자동화 & 은행 이체 | 계산만 존재, 실제 지급 불가 | **CRITICAL** — 상담사 이탈 |
| 2 | 추천인 보상 실지급 | 기록만 생성, 지갑 미크레딧 | **HIGH** — 그로스 기능 무용 |
| 3 | 캐시 리프레시 스케줄러 | TODO 주석만 존재 | **MEDIUM** — 성능 이슈 |
| 4 | 분쟁 해결 워크플로우 | OPEN 상태만 존재 | **HIGH** — CS 대응 불가 |
| 5 | 예약 취소 정책 | 취소 로직 불완전 | **HIGH** — 환불 분쟁 |
| 6 | 영수증/인보이스 PDF | 서비스 스텁만 존재 | **MEDIUM** — 법적 요구 |
| 7 | 감사 로그 보존 정책 | 무한 증가, 클린업 없음 | **MEDIUM** — 스토리지 |
| 8 | OAuth (카카오/네이버) | 컨트롤러 스텁만 존재 | **HIGH** — 한국 시장 필수 |

---

## Part 2: 경쟁사 벤치마킹 기반 Gap 분석

### 2.1 경쟁사별 핵심 전략

| 플랫폼 | MAU/매출 | 핵심 전략 | 우리가 배울 점 |
|--------|----------|-----------|---------------|
| **점신** | 1,900만 사용자 | 무료 AI 콘텐츠 → 습관 형성 → 유료 전환 | 매일 오는 이유를 만들어야 함 |
| **사주나루** | 4,000억 매출 | Human Touch 1:1 전화 상담 독점 | 상담 품질이 매출의 핵심 |
| **포스텔러** | 860만 사용자 | 100-200p 깊이 있는 분석 리포트 | 콘텐츠 깊이가 차별화 |
| **출장도사** | 660+ 도사 | 영상 상담 + 리뷰 코인 보상 | 영상은 차별점, 코인은 리텐션 |
| **트로스트** | CashWalk 인수 | 24시 익명 + AI 챗봇 + B2B EAP | 법인 고객 시장 존재 |
| **마인드카페** | 400만 커뮤니티 | 커뮤니티 → 유료 상담 전환 | 커뮤니티가 최강의 획득 채널 |
| **크몽** | - | Prime 등급 + 품질 보장 마크 | 상담사 신뢰 시스템 필수 |
| **숨고** | 3,300만 견적 | 고객 요청형 → 전문가 견적 | 역방향 매칭 가능성 |
| **닥터나우** | 2,500+ 의료기관 | 사전 미디어 체크 + 예약 슬롯 | 영상 상담 UX 참고 |

### 2.2 기능 격차 매트릭스 (경쟁사 보유 vs 우리 미보유)

#### Tier 1: 즉시 도입 필요 (경쟁사 80%+ 보유)

| 기능 | 점신 | 사주나루 | 출장도사 | 트로스트 | 마인드카페 | 우리 |
|------|------|---------|---------|---------|-----------|------|
| 소셜 로그인 (카카오/네이버) | O | O | O | O | O | **X** |
| 푸시 알림 | O | O | O | O | O | **X** |
| 무료 일일 운세/콘텐츠 | O | X | O | X | X | **X** |
| 상담사 등급/인증 뱃지 | X | O | O | O | O | **X** |
| 상담 후 리뷰 인센티브 | X | O | O | X | X | **X** |

#### Tier 2: 차별화 기능 (경쟁사 40-60% 보유)

| 기능 | 점신 | 사주나루 | 출장도사 | 트로스트 | 마인드카페 | 우리 |
|------|------|---------|---------|---------|-----------|------|
| AI 챗봇 (사전 가이드) | X | X | X | O | O | **X** |
| 커뮤니티/포럼 | X | X | X | X | O | **X** |
| 실시간 접속 상태 | X | X | O | X | X | **X** |
| 상담 요약 리포트 | X | X | X | X | X | **X** |
| 인앱 화폐/포인트 시스템 | X | X | O | X | X | **X** |

#### Tier 3: 미래 차별화 (경쟁사 20% 미만 보유)

| 기능 | 보유 플랫폼 | 우리 |
|------|-------------|------|
| 상담 녹화/재생 | 없음 | **X** |
| AI 상담 요약 | 없음 | **X** |
| B2B 법인 상담 패키지 | 트로스트, 마인드카페 | **X** |
| 상담사 영상 소개 콘텐츠 | 출장도사TV | **X** |
| 궁합 체크 (자체 알고리즘) | 점신, 포스텔러 | **X** |

---

## Part 3: 신규 기능 PRD

### Epic 1: 무료 콘텐츠 엔진 (사용자 획득)

> **벤치마크**: 점신 (1,900만 사용자의 핵심 = 매일 보는 무료 운세)
> **목표**: DAU 10x 성장의 트리거, "매일 오는 이유" 생성

#### 1.1 오늘의 운세 (Daily Fortune)

**기능 설명**: 사주 기반 오늘의 운세를 매일 자동 생성하여 사용자에게 제공. 앱/웹 첫 화면에 노출.

**세부 기능**:

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 일일 종합운 | 총운, 재물운, 애정운, 건강운 (1-100 점수) | P0 |
| 시간대별 운세 | 오전/오후/저녁 구간별 조언 | P1 |
| 럭키 아이템 | 오늘의 색상, 숫자, 방향, 음식 | P1 |
| 바이오리듬 | 신체/감성/지성 곡선 시각화 | P2 |
| 궁합 체크 | 두 사람의 사주 호환성 점수 | P1 |
| 꿈해몽 | 키워드 기반 꿈 해석 (AI 생성) | P2 |

**기술 설계**:
```
Backend:
  - FortuneService: 사주 알고리즘 기반 일일 운세 생성 (사용자 생년월일 + 오늘 날짜)
  - 매일 00:00 KST 배치 생성 또는 On-demand 캐싱
  - 결과 캐시 TTL: 24시간

Frontend:
  - 홈 화면 상단 "오늘의 운세" 카드 (접힘/펼침)
  - 점수 게이지 바 + 조언 텍스트
  - "자세히 보기" → 상세 페이지 (로그인 필요)

Flutter:
  - 홈 탭 최상단 위젯
  - 푸시 알림: 매일 08:00 "오늘의 운세가 도착했어요"
```

**수익화 연결**:
- 무료: 총운 점수 + 한줄 요약
- 로그인 필요: 세부 항목별 운세
- 유료: "오늘의 상담사 추천" → 예약 전환

**KPI**:
- 일일 운세 조회율 → 로그인 전환율 → 예약 전환율
- 목표: DAU의 60%가 매일 운세 확인

#### 1.2 블로그/콘텐츠 허브 강화

**현황**: 블로그 페이지 존재하지만 정적 콘텐츠 (사주/타로/꿈해몽/운세/상담가이드 카테고리)

**강화 방향**:

| 기능 | 설명 | 벤치마크 |
|------|------|----------|
| 상담사 칼럼 | 상담사가 직접 작성하는 전문 칼럼 | 출장도사TV |
| 운세 캘린더 | 월별/주별 운세 달력 시각화 | 점신 |
| 타로 카드 뽑기 | 1장/3장 타로 무료 체험 (AI 해석) | 포스텔러 |
| 심리 테스트 | 사주 기반 성격/궁합 테스트 (바이럴) | 점신 |
| SEO 최적화 | JSON-LD, OG 태그, sitemap 자동 생성 | 필수 |

**예상 효과**: 오가닉 트래픽 5x 증가 (SEO), 소셜 공유를 통한 바이럴

---

### Epic 2: 상담사 신뢰 시스템 (전환율 향상)

> **벤치마크**: 크몽 Prime (상위 2%), 트로스트 3-tier, 마인드카페 자격증 검증
> **목표**: 상담사 프로필 신뢰도 → 예약 전환율 30% 향상

#### 2.1 상담사 등급 시스템

**등급 구조**:

```
신입 (New)        : 가입 후 10회 미만 상담
정규 (Regular)    : 10회+ 상담, 평점 4.0+
전문 (Expert)     : 50회+ 상담, 평점 4.3+, 응답률 90%+
마스터 (Master)   : 200회+ 상담, 평점 4.5+, 응답률 95%+, 운영진 심사
```

**등급 결정 지표** (월 1회 갱신, 크몽 방식):

| 지표 | 가중치 | 산출 방식 |
|------|--------|-----------|
| 누적 상담 횟수 | 25% | 완료된 상담 세션 수 |
| 고객 만족도 (평점) | 30% | 최근 6개월 리뷰 평균 |
| 응답률 | 20% | 예약 요청 대비 수락/거절 비율 |
| 일정 준수율 | 15% | 노쇼 없이 정시 시작한 비율 |
| 재예약률 | 10% | 동일 고객의 재방문 비율 |

**UI 표시**:
- 상담사 카드에 등급 뱃지 (색상 구분)
- 상담사 상세 페이지에 등급 근거 표시
- 필터: "마스터 상담사만 보기"

**백엔드**:
```java
@Scheduled(cron = "0 0 2 1 * ?")  // 매월 1일 새벽 2시
public void recalculateCounselorGrades() {
    // 최근 6개월 데이터 기반 등급 재산정
    // Grade enum: NEW, REGULAR, EXPERT, MASTER
}
```

#### 2.2 인증/자격 뱃지

**벤치마크**: 마인드카페 (공인 학회 자격증 + 석사 이상), 숨고 (사업자등록증)

| 뱃지 | 조건 | 검증 방법 |
|------|------|-----------|
| 본인 인증 | 실명 + 휴대폰 인증 | PASS 인증 API |
| 사업자 인증 | 사업자등록증 제출 | 국세청 API 조회 |
| 자격 인증 | 관련 자격증 제출 (민간/국가) | 운영진 수동 검증 |
| 경력 인증 | 경력 증명 서류 | 운영진 수동 검증 |
| 프리미엄 인증 | 위 4개 모두 + 면접 통과 | 플랫폼 심사 |

**효과**: 인증 뱃지 보유 상담사의 예약 전환율 40% 높음 (크몽 데이터)

#### 2.3 상담사 영상 소개

**벤치마크**: 출장도사TV

| 기능 | 설명 |
|------|------|
| 30초 자기소개 영상 | 프로필에 영상 임베드 |
| 전문 분야 강의 영상 | 상담사 채널 (무료 콘텐츠) |
| 실시간 방송 (V2) | 상담사 라이브 방송 → 예약 유도 |

**기술**: S3 + CloudFront CDN, HLS 스트리밍, 썸네일 자동 생성

---

### Epic 3: 리텐션 & 인게이지먼트 시스템

> **벤치마크**: 출장도사 (코인 보상), 포스텔러 (포스 포인트), 마인드카페 (커뮤니티)
> **목표**: 30일 리텐션 40% → 65%

#### 3.1 포인트/리워드 시스템

**포인트 적립 규칙**:

| 행동 | 적립 포인트 | 일일 한도 |
|------|-------------|-----------|
| 매일 출석 체크 | 50P | 50P |
| 일일 운세 확인 | 30P | 30P |
| 리뷰 작성 | 300P | 1회/상담 |
| 상세 리뷰 (200자+) | 500P | 1회/상담 |
| 추천인 코드 공유 (신규 가입) | 2,000P | 무제한 |
| 첫 상담 완료 | 1,000P | 1회 |
| 연속 3일 출석 | 200P 보너스 | 주 1회 |
| 연속 7일 출석 | 500P 보너스 | 월 4회 |

**포인트 사용**:
- 1,000P = 1,000원 캐시 전환
- 특정 상품/상담에 포인트 직접 사용
- 포인트 전용 상담 (체험 상담)

**기술 설계**:
```
PointEntity:
  - userId, type (EARN/SPEND), amount, reason, createdAt
  - dailyCap validation per type

PointBalanceEntity:
  - userId, totalEarned, totalSpent, currentBalance
  - Pessimistic lock for concurrent updates
```

#### 3.2 커뮤니티 (익명 게시판)

**벤치마크**: 마인드카페 (400만 회원의 익명 SNS → 유료 상담 전환 퍼널)

**게시판 구조**:

| 카테고리 | 설명 | 익명 여부 |
|----------|------|-----------|
| 사주 이야기 | 사주/운세 관련 자유 토론 | 익명 |
| 고민 상담소 | 연애/재물/진로 고민 공유 | 익명 |
| 상담 후기 | 상담 경험 공유 (상담사 태그) | 선택 |
| 타로 연습장 | 타로 학습자 커뮤니티 | 실명 |
| 꿈 일기장 | 꿈 기록 + AI 해몽 연결 | 익명 |

**핵심 기능**:
- 익명 닉네임 (자동 생성: 은빛여우, 달빛나비 등)
- 좋아요/댓글/신고
- 인기글 랭킹 (일간/주간)
- 상담사 답변 (전문가 뱃지 표시)
- 게시글 → 상담 예약 CTA 연결

**수익화**: 커뮤니티 활성 사용자의 상담 전환율이 일반 사용자 대비 3x (마인드카페 데이터)

#### 3.3 알림 센터 고도화

**현황**: SSE 기반 인앱 알림 구현, 그러나 푸시 알림 없음

**개선 계획**:

| 알림 타입 | 채널 | 현황 | 목표 |
|-----------|------|------|------|
| 예약 확인 | In-App, Email, Push | Email만 | 3채널 |
| 상담 10분 전 리마인더 | In-App, Push, SMS | In-App만 | 3채널 |
| 상담 완료 / 리뷰 요청 | In-App, Push | 미구현 | 2채널 |
| 일일 운세 도착 | Push | 미구현 | 1채널 |
| 찜한 상담사 접속 | Push | 미구현 | 1채널 |
| 커뮤니티 댓글 알림 | In-App, Push | 미구현 | 2채널 |
| 포인트 적립 알림 | In-App | 미구현 | 1채널 |
| 정산 완료 (상담사) | In-App, Email | 부분 | 2채널 |

**기술**:
- Web: Web Push API (FCM)
- Flutter: Firebase Cloud Messaging (FCM)
- SMS: Aligo API (이미 프로바이더 존재, 연동만 필요)

---

### Epic 4: 결제/수익화 고도화

> **벤치마크**: 사주나루 (분당 과금, 매출 4,000억), 크몽 (수수료 체계)
> **목표**: ARPU 2x, 결제 완료율 90%+

#### 4.1 결제 수단 다양화

**현황**: PortOne 연동 (카드만 활성화 추정)

**목표**:

| 결제 수단 | 현황 | 우선순위 | 비고 |
|-----------|------|----------|------|
| 신용/체크카드 | 구현 | - | PortOne |
| 카카오페이 | 미구현 | P0 | PortOne 간편결제 연동 |
| 네이버페이 | 미구현 | P0 | PortOne 간편결제 연동 |
| 토스페이 | 미구현 | P1 | PortOne 간편결제 연동 |
| 계좌이체 | 미구현 | P1 | PortOne 연동 |
| 휴대폰 결제 | 미구현 | P2 | 소액 결제 수요 |

**효과**: 간편결제 추가 시 결제 완료율 15-25% 향상 (업계 평균)

#### 4.2 구독/패키지 상품

**벤치마크**: 마인드카페 Pro (월 12.9-17만원), 트로스트 (세션 기반)

| 상품 | 가격 (월) | 포함 내용 |
|------|-----------|-----------|
| 라이트 | 33,000원 | 크레딧 1회분 (30분) + 일일운세 프리미엄 |
| 스탠다드 | 89,000원 | 크레딧 3회분 + 프리미엄 콘텐츠 + 우선 예약 |
| 프리미엄 | 149,000원 | 크레딧 5회분 + 마스터 상담사 전용 + 상담 녹화 |
| VIP | 299,000원 | 무제한 크레딧 + 전담 상담사 + 월간 운세 리포트 |

**기술**:
```
SubscriptionEntity:
  - userId, planType, startDate, endDate, autoRenew
  - status: ACTIVE, PAUSED, CANCELED, EXPIRED

SubscriptionService:
  - 월 정기결제 (PortOne 정기결제 API)
  - 크레딧 자동 충전
  - 구독 혜택 적용 (우선 예약, 할인 등)
```

#### 4.3 정산 자동화 (P0 - Production Blocker)

**현황**: 정산 금액 계산 완료, 은행 이체 미구현

**구현 계획**:

| 단계 | 내용 | 기술 |
|------|------|------|
| Phase 1 | 수동 정산 확정 + 이체 내역 기록 | Admin UI에서 "이체 완료" 체크 |
| Phase 2 | 자동 은행 이체 연동 | 오픈뱅킹 API 또는 토스페이먼츠 정산 API |
| Phase 3 | 실시간 정산 대시보드 | 상담사 포털에 수익 분석 차트 |

**정산 정책**:
- 수수료: 20% 플랫폼 / 80% 상담사
- 정산 주기: 월 1회 (익월 15일)
- 최소 정산 금액: 10,000원
- 원천징수: 3.3% (사업소득)

#### 4.4 영수증/인보이스 생성

**현황**: ReceiptService 스텁 존재, 실제 PDF 생성 미구현

| 기능 | 설명 |
|------|------|
| 거래 영수증 | 캐시 충전, 크레딧 구매 시 자동 생성 |
| 상담 이용 확인서 | 상담 완료 후 다운로드 가능 |
| 정산 명세서 (상담사) | 월별 정산 내역 PDF |
| 세금 계산서 (B2B) | 법인 고객용 |

**기술**: Apache PDFBox 또는 iText, S3 저장, 다운로드 링크 발급

---

### Epic 5: 소셜 로그인 & 온보딩 개선

> **벤치마크**: 한국 앱 시장 필수 기능 (카카오 5,300만, 네이버 4,200만 사용자)
> **목표**: 가입 전환율 50% → 80%

#### 5.1 소셜 로그인

| 프로바이더 | 우선순위 | 취득 정보 | 비고 |
|-----------|----------|-----------|------|
| 카카오 | P0 | 이메일, 닉네임, 프로필 이미지, 생년월일 | 한국 1위 |
| 네이버 | P0 | 이메일, 이름, 성별, 생년월일, 휴대폰 | 한국 2위 |
| 구글 | P2 | 이메일, 이름, 프로필 이미지 | 글로벌 확장 시 |
| 애플 | P1 | 이메일 (선택), 이름 | iOS 앱스토어 필수 |

**기술**:
```
Backend:
  - OAuthController → OAuthService → OAuthProviderFactory
  - 카카오: REST API (kauth.kakao.com/oauth/token)
  - 네이버: REST API (nid.naver.com/oauth2.0/token)
  - UserEntity에 oauthProvider, oauthId 필드 추가
  - 기존 이메일 계정 연동 (동일 이메일 → 계정 병합 확인)

Frontend (Web):
  - 카카오 JS SDK / 네이버 로그인 SDK
  - 로그인 페이지에 소셜 로그인 버튼 추가

Flutter:
  - kakao_flutter_sdk, flutter_naver_login 패키지
  - 딥링크 콜백 처리
```

#### 5.2 온보딩 퍼널 개선

**현황**: 회원가입 → 바로 메인 페이지

**개선 플로우**:
```
소셜 로그인 (1탭)
  → 생년월일 입력 (사주 필수 정보, 1화면)
  → 관심 분야 선택 (사주/타로/신점/꿈해몽, 멀티 선택)
  → 고민 유형 선택 (연애/재물/진로/건강/가정, 멀티 선택)
  → "오늘의 추천 상담사" 3명 표시
  → 메인 페이지
```

**효과**: 온보딩 중 수집한 선호 데이터로 개인화 추천 정확도 향상

---

### Epic 6: 상담 경험 고도화

> **벤치마크**: 닥터나우 (사전 체크), 출장도사 (영상), 트로스트 (AI 사전 상담)
> **목표**: 상담 만족도 4.5+ / 상담 완료율 95%+

#### 6.1 실시간 접속 상태 표시

**벤치마크**: 출장도사 (도사 접속 상태 실시간 표시)

| 상태 | 표시 | 의미 |
|------|------|------|
| 온라인 (접속 중) | 초록 원 | 즉시 상담 가능 |
| 상담 중 | 주황 원 | 다른 고객 상담 중 |
| 자리 비움 | 회색 원 | 30분 내 미응답 시 |
| 오프라인 | 빈 원 | 미접속 |

**기술**: WebSocket heartbeat (30초 간격) 또는 Redis Presence 패턴

#### 6.2 즉시 상담 (Quick Match)

**현황**: 예약 기반만 존재

**새 플로우**:
```
사용자 "지금 바로 상담" 클릭
  → 접속 중인 상담사 목록 표시 (필터: 전문 분야)
  → 상담사 선택 → 크레딧 차감 확인
  → 상담사에게 즉시 알림 (30초 내 수락/거절)
  → 수락 시: 바로 영상 상담 시작
  → 거절/타임아웃: 다음 상담사 추천 또는 예약 유도
```

**기술**:
```
QuickMatchService:
  - 접속 중인 상담사 필터링
  - SSE/WebSocket으로 상담사에게 실시간 알림
  - 30초 타임아웃 → 자동 다음 후보
  - 매칭 성공 시: ConsultationSession 즉시 생성
```

#### 6.3 상담 요약 리포트

**벤치마크**: 닥터나우 (처방전), 어떤 경쟁사도 미보유 (블루오션)

| 항목 | 설명 |
|------|------|
| 상담 일시/시간 | 자동 기록 |
| 상담 유형 | 사주/타로/신점 |
| 핵심 키워드 | 상담사가 태그 입력 (연애/재물/진로 등) |
| 상담 메모 | 상담사가 작성한 세션 메모 |
| 추천 행동 | 상담사가 작성하는 조언 요약 |
| 다음 상담 추천일 | 상담사가 설정 (리텐션 트리거) |
| 만족도 | 고객 리뷰 연결 |

**V2 확장**: AI 요약 (상담 내용 자동 정리, 고객 동의 필요)

#### 6.4 상담 전 사전 설문

**벤치마크**: 닥터나우 (증상 입력), 트로스트 (AI 사전 체크)

```
예약 확정 후 → 사전 설문 링크 발송
  1. 이번 상담에서 가장 알고 싶은 것은? (텍스트)
  2. 고민 분야 선택 (연애/재물/진로/건강/가정/기타)
  3. 이전 상담 경험이 있나요? (Y/N)
  4. 선호하는 상담 스타일 (따뜻한/직설적/분석적)
```

**효과**: 상담사가 사전에 고객 니즈 파악 → 상담 품질 향상 → 리뷰 점수 향상

---

### Epic 7: 관리자 & 운영 도구 강화

> **목표**: 운영 효율 3x, CS 대응 시간 30분 → 5분

#### 7.1 비즈니스 분석 대시보드

**현황**: KPI Summary API 존재, 프론트엔드 시각화 없음

| 대시보드 | 메트릭 | 시각화 |
|----------|--------|--------|
| 매출 현황 | 일/주/월 매출, 결제 건수, ARPU | 라인 차트 + 비교 |
| 사용자 현황 | DAU/WAU/MAU, 신규 가입, 이탈률 | 영역 차트 |
| 상담 현황 | 완료율, 평균 시간, 상담사별 실적 | 바 차트 + 테이블 |
| 상담사 분석 | 등급 분포, 평점 분포, 수익 순위 | 파이 차트 + 히트맵 |
| 환불/분쟁 | 환불 비율, 분쟁 원인 분류, 처리 시간 | 퍼널 차트 |
| 퍼널 분석 | 가입→탐색→예약→결제→상담→리뷰 | 퍼널 시각화 |

**기술**:
- 백엔드: 기존 AdminKpiService 확장, 시계열 데이터 저장
- 프론트: Recharts 또는 Chart.js, 실시간 갱신 (30초)

#### 7.2 분쟁 해결 워크플로우 (P0)

**현황**: OPEN 상태만 존재, 해결 프로세스 없음

**워크플로우**:
```
고객 분쟁 신청 (OPEN)
  → 운영진 1차 검토 (UNDER_REVIEW)
    → 증거 수집 (상담 로그, 결제 내역 자동 연결)
    → 상담사 소명 요청 (COUNSELOR_RESPONSE_NEEDED)
    → 상담사 소명 제출
  → 운영진 판정 (RESOLVED_FOR_CUSTOMER / RESOLVED_FOR_COUNSELOR / MEDIATED)
    → 자동 환불 처리 (고객 유리 판정 시)
    → 상담사 패널티 처리 (누적 분쟁 시)
  → 불복 시 2차 심사 (APPEALED → FINAL_DECISION)
```

**상담사 패널티 정책**:
- 분쟁 1회: 경고
- 분쟁 3회 (6개월 내): 1주 활동 정지
- 분쟁 5회 (1년 내): 영구 정지 심사

#### 7.3 상담사 심사/승인 프로세스 강화

**현황**: CounselorApplicationEntity 존재, 승인 로직 기본

**개선**:

| 단계 | 내용 | 자동화 |
|------|------|--------|
| 1. 신청서 접수 | 기본 정보 + 전문 분야 + 경력 | 자동 |
| 2. 서류 검증 | 사업자등록증, 자격증 업로드 | 수동 |
| 3. 테스트 상담 | 운영진과 15분 모의 상담 | 수동 |
| 4. 심사 결과 | 합격/불합격 + 피드백 | 반자동 |
| 5. 온보딩 | 플랫폼 사용법 가이드 제공 | 자동 |

---

### Epic 8: 모바일 (Flutter) 기능 동기화

> **목표**: 웹-앱 기능 패리티 90%+

#### 8.1 푸시 알림 (P0)

**현황**: 미구현 (Firebase 미설정)

| 알림 | 트리거 | 우선순위 |
|------|--------|----------|
| 예약 확인 | 예약 생성 시 | P0 |
| 상담 10분 전 | 스케줄러 | P0 |
| 상담 시작 | 상담사 입장 시 | P0 |
| 리뷰 요청 | 상담 완료 후 1시간 | P1 |
| 일일 운세 | 매일 08:00 | P1 |
| 포인트 적립 | 포인트 변동 시 | P2 |
| 마케팅 | 어드민 수동 발송 | P2 |

**기술**:
```yaml
# pubspec.yaml
dependencies:
  firebase_core: ^3.0.0
  firebase_messaging: ^15.0.0
  flutter_local_notifications: ^18.0.0

# Backend
POST /api/v1/devices/register
  body: { fcmToken, platform (IOS/ANDROID), deviceId }

NotificationService:
  - sendPush(userId, title, body, data)
  - FCM HTTP v1 API 연동
```

#### 8.2 오프라인 모드

| 기능 | 오프라인 지원 | 기술 |
|------|--------------|------|
| 홈 화면 | 마지막 데이터 캐시 | Hive/SQLite |
| 상담사 목록 | 캐시 (24시간 TTL) | Hive |
| 예약 내역 | 캐시 | Hive |
| 지갑 잔액 | 마지막 조회 값 표시 | SharedPreferences |
| 예약 생성 | 온라인 필수 | 오프라인 시 안내 메시지 |
| 상담 | 온라인 필수 | 네트워크 체크 후 진입 |

#### 8.3 상담사 포털 (Flutter)

**현황**: Flutter 앱에 상담사 기능 없음

**최소 구현 범위**:
- 대시보드 (오늘 예약, 수익 요약)
- 예약 목록 (수락/거절)
- 상담실 (영상 통화 수신)
- 정산 내역 조회
- 프로필 편집

---

### Epic 9: SEO & 마케팅 인프라

> **목표**: 오가닉 트래픽 월 50,000+ 달성

#### 9.1 기술적 SEO

| 항목 | 현황 | 목표 |
|------|------|------|
| robots.txt | 미구현 | 생성 |
| sitemap.xml | 미구현 | 자동 생성 (Next.js) |
| OG 태그 | 기본 | 페이지별 커스텀 |
| JSON-LD (구조화 데이터) | 미구현 | Service, Person, Review 스키마 |
| 페이지 속도 | 측정 안됨 | Core Web Vitals 통과 |
| 캐노니컬 URL | 미설정 | 설정 |

#### 9.2 컨텐츠 SEO

| 콘텐츠 | 타겟 키워드 | 예상 월간 검색량 |
|--------|-------------|-----------------|
| 2026년 사주 운세 | "2026 사주", "병오년 운세" | 50,000+ |
| 오늘의 운세 | "오늘의 운세", "오늘 운세" | 200,000+ |
| 타로 무료 | "무료 타로", "타로 점" | 100,000+ |
| 궁합 보기 | "궁합", "사주 궁합" | 80,000+ |
| 꿈 해몽 | "꿈 해몽", "꿈 풀이" | 60,000+ |

**전략**: 무료 콘텐츠 (오늘의 운세, 궁합 체크, 꿈 해몽)를 SEO 랜딩 페이지로 활용 → 상담 전환

#### 9.3 GA4 & 이벤트 추적

| 이벤트 | 파라미터 |
|--------|----------|
| page_view | page_title, page_path |
| sign_up | method (email/kakao/naver) |
| login | method |
| search_counselor | specialty, keyword |
| view_counselor | counselor_id, counselor_grade |
| book_consultation | counselor_id, slot_count, type |
| purchase | value, currency, payment_method |
| start_consultation | session_id, type (video/chat) |
| complete_consultation | session_id, duration_minutes |
| submit_review | counselor_id, rating |
| share_content | content_type, method |

---

### Epic 10: B2B 법인 상담 패키지

> **벤치마크**: 트로스트 Care (EAP), 마인드카페 B2B
> **목표**: B2B 매출 비중 20% 달성 (출시 12개월 후)

#### 10.1 기업 고객 상품

| 상품 | 대상 | 내용 | 가격대 |
|------|------|------|--------|
| 스타트업 패키지 | 50인 이하 | 월 10회 상담권 + 리포트 | 50만원/월 |
| 중소기업 패키지 | 300인 이하 | 월 50회 상담권 + 관리자 대시보드 | 200만원/월 |
| 대기업 패키지 | 300인 이상 | 무제한 상담 + 전담 매니저 + 분석 | 맞춤 견적 |

**기능**:
- 법인 관리자 대시보드 (이용 현황, 만족도 통계)
- 임직원 익명 이용 (회사에는 이용 건수만 공개)
- 월간 이용 리포트 자동 생성
- 세금계산서 발행

---

## Part 4: 구현 우선순위 & 로드맵

### Phase 0: Production Blocker 해소 (2주)

> **목표**: 현재 서비스가 정상 운영 가능한 최소 조건

| # | 항목 | 예상 공수 | 담당 |
|---|------|-----------|------|
| 0-1 | 정산 수동 이체 확정 프로세스 | 3일 | Backend |
| 0-2 | 분쟁 해결 워크플로우 (기본) | 3일 | Backend + Frontend |
| 0-3 | 예약 취소 정책 완성 | 2일 | Backend |
| 0-4 | 추천인 보상 실지급 연동 | 1일 | Backend |
| 0-5 | 캐시 리프레시 스케줄러 구현 | 1일 | Backend |
| 0-6 | 감사 로그 보존 정책 | 1일 | Backend |
| 0-7 | 영수증 PDF 생성 기본 | 3일 | Backend |

### Phase 1: 사용자 획득 엔진 (4주)

> **목표**: MAU 10x 성장 기반 구축

| # | 항목 | 예상 공수 | 의존성 |
|---|------|-----------|--------|
| 1-1 | 소셜 로그인 (카카오 + 네이버) | 5일 | OAuth API 키 |
| 1-2 | 오늘의 운세 엔진 (백엔드 + 프론트) | 7일 | 사주 알고리즘 |
| 1-3 | SEO 기본 (sitemap, OG, JSON-LD) | 3일 | - |
| 1-4 | GA4 이벤트 추적 세팅 | 2일 | GA4 계정 |
| 1-5 | 온보딩 퍼널 개선 | 3일 | 1-1 |
| 1-6 | Flutter 푸시 알림 | 5일 | Firebase 프로젝트 |

### Phase 2: 전환율 & 신뢰 향상 (4주)

> **목표**: 탐색 → 예약 전환율 30% 향상

| # | 항목 | 예상 공수 | 의존성 |
|---|------|-----------|--------|
| 2-1 | 상담사 등급 시스템 | 5일 | - |
| 2-2 | 인증/자격 뱃지 | 3일 | 2-1 |
| 2-3 | 결제 수단 다양화 (카카오/네이버페이) | 3일 | PortOne 설정 |
| 2-4 | 사전 설문 시스템 | 3일 | - |
| 2-5 | 실시간 접속 상태 | 5일 | WebSocket/Redis |
| 2-6 | 상담 요약 리포트 | 4일 | - |

### Phase 3: 리텐션 & 인게이지먼트 (6주)

> **목표**: 30일 리텐션 40% → 65%

| # | 항목 | 예상 공수 | 의존성 |
|---|------|-----------|--------|
| 3-1 | 포인트/리워드 시스템 | 7일 | - |
| 3-2 | 리뷰 인센티브 (포인트 연동) | 2일 | 3-1 |
| 3-3 | 커뮤니티 게시판 (MVP) | 10일 | - |
| 3-4 | 즉시 상담 (Quick Match) | 7일 | 2-5 |
| 3-5 | 알림 센터 고도화 | 5일 | 1-6 |
| 3-6 | 구독/패키지 상품 | 5일 | PortOne 정기결제 |

### Phase 4: 운영 효율화 & 확장 (4주)

> **목표**: 운영 비용 절감, 신규 수익원

| # | 항목 | 예상 공수 | 의존성 |
|---|------|-----------|--------|
| 4-1 | 비즈니스 분석 대시보드 | 7일 | 1-4 |
| 4-2 | 정산 자동화 (은행 이체) | 5일 | 오픈뱅킹 API |
| 4-3 | 상담사 심사 프로세스 강화 | 3일 | - |
| 4-4 | Flutter 상담사 포털 (MVP) | 10일 | - |
| 4-5 | B2B 법인 패키지 (기본) | 7일 | - |

### Phase 5: 미래 차별화 (Ongoing)

| # | 항목 | 예상 공수 | 비고 |
|---|------|-----------|------|
| 5-1 | AI 상담 요약 | 5일 | LLM API 연동 |
| 5-2 | 상담 녹화/재생 | 7일 | Sendbird Recording |
| 5-3 | 상담사 영상 소개 콘텐츠 | 5일 | S3 + CDN |
| 5-4 | 궁합/타로 무료 체험 | 5일 | 알고리즘 |
| 5-5 | 다국어 지원 (영어/일본어) | 7일 | next-intl 확장 |
| 5-6 | 앱 오프라인 모드 | 5일 | Hive/SQLite |

---

## Part 5: 성공 지표 (KPI)

### 5.1 핵심 비즈니스 KPI

| 지표 | 현재 (추정) | Phase 1 후 | Phase 3 후 | Phase 5 후 |
|------|-------------|-----------|-----------|-----------|
| MAU | - | 5,000 | 30,000 | 100,000 |
| DAU/MAU (Stickiness) | - | 15% | 35% | 45% |
| 가입 → 첫 상담 전환율 | - | 5% | 12% | 18% |
| 탐색 → 예약 전환율 | - | 8% | 15% | 20% |
| 결제 완료율 | - | 75% | 90% | 93% |
| 상담 완료율 | - | 85% | 92% | 95% |
| 리뷰 작성률 | - | 20% | 45% | 60% |
| 30일 리텐션 | - | 25% | 45% | 60% |
| ARPU (월) | - | 33,000원 | 55,000원 | 80,000원 |
| NPS | - | 30 | 50 | 65 |

### 5.2 운영 KPI

| 지표 | 목표 |
|------|------|
| CS 첫 응답 시간 | < 30분 |
| 분쟁 해결 시간 | < 24시간 |
| 정산 지연율 | 0% (익월 15일 내) |
| 시스템 가용성 | 99.9% |
| API 응답 시간 (p95) | < 500ms |

---

## Part 6: 리스크 & 완화 전략

| 리스크 | 확률 | 영향 | 완화 전략 |
|--------|------|------|-----------|
| 상담사 수급 부족 | 높음 | 치명적 | Phase 2 상담사 인센티브 + 온보딩 강화 |
| 결제 사고 (이중 과금) | 중간 | 높음 | 아이뎀포턴시 키 + webhook 검증 (이미 구현) |
| 상담 품질 편차 | 높음 | 높음 | 등급 시스템 + 리뷰 인센티브 + 모니터링 |
| 영상 통화 품질 이슈 | 중간 | 높음 | Sendbird SLA + preflight 체크 (이미 구현) |
| 개인정보 유출 | 낮음 | 치명적 | 암호화 + 접근 로그 + 정기 보안 감사 |
| 법적 규제 (통신판매업) | 중간 | 높음 | 사업자등록 + 이용약관 + 전자상거래법 준수 |
| 경쟁사 모방 (영상 상담) | 높음 | 중간 | 선점 효과 + UX 차별화 + 상담사 록인 |

---

## 부록: 기술 부채 목록

| 항목 | 현황 | 우선순위 |
|------|------|----------|
| OAuth 스텁 컨트롤러 | 코드만 존재, 동작 안함 | Phase 1에서 해결 |
| 이메일 링크 localhost 하드코딩 | 프로덕션 배포 시 깨짐 | Phase 0 |
| ConsecutiveSessionService 빈 구현 | 연속 상담 미지원 | Phase 2 |
| N+1 쿼리 (상담사 + 리뷰) | 성능 이슈 가능 | Phase 2 |
| 감사 로그 무한 증가 | 스토리지 고갈 위험 | Phase 0 |
| Redis 분산 락 데드락 가능성 | 동시성 이슈 | Phase 1 |
| CSRF 보호 미확인 | 보안 취약점 | Phase 0 |
| CORS localhost 전용 | 프로덕션 배포 불가 | Phase 0 |
| 정산 PDF 서비스 스텁 | 빈 구현 | Phase 0 |
| Flutter API 필드명 불일치 (5건) | 앱 동작 불가 | Phase 0 |

---

> **문서 버전**: v1.0
> **다음 업데이트**: Phase 0 완료 후 (2주 후)
> **담당 PM**: Claude Code PM Agent
