spring:
  application:
    name: cheonjiyeon-api
  datasource:
    url: ${DB_URL:jdbc:h2:mem:cheonjiyeon;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
    username: ${DB_USER:sa}
    password: ${DB_PASSWORD:}
  jpa:
    hibernate:
      ddl-auto: none
  flyway:
    enabled: true
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      timeout: ${REDIS_TIMEOUT:2000}
  cache:
    type: ${CACHE_TYPE:simple}
jwt:
  secret: ${JWT_SECRET:dev-secret-dev-secret-dev-secret-32chars}

auth:
  allow-e2e-admin-bootstrap: ${AUTH_ALLOW_E2E_ADMIN_BOOTSTRAP:false}

alerts:
  webhook-url: ${ALERTS_WEBHOOK_URL:}

payment:
  provider: ${PAYMENT_PROVIDER:fake}
  webhook-secret: ${PAYMENT_WEBHOOK_SECRET:}
  http:
    base-url: ${PAYMENT_HTTP_BASE_URL:}
    api-key: ${PAYMENT_HTTP_API_KEY:}
    connect-timeout-ms: ${PAYMENT_HTTP_CONNECT_TIMEOUT_MS:2000}
    read-timeout-ms: ${PAYMENT_HTTP_READ_TIMEOUT_MS:4000}
    retry-attempts: ${PAYMENT_HTTP_RETRY_ATTEMPTS:3}
    retry-backoff-ms: ${PAYMENT_HTTP_RETRY_BACKOFF_MS:200}

chat:
  provider: ${CHAT_PROVIDER:fake}
  http:
    base-url: ${CHAT_HTTP_BASE_URL:}
    api-key: ${CHAT_HTTP_API_KEY:}
    connect-timeout-ms: ${CHAT_HTTP_CONNECT_TIMEOUT_MS:2000}
    read-timeout-ms: ${CHAT_HTTP_READ_TIMEOUT_MS:4000}
    retry-attempts: ${CHAT_HTTP_RETRY_ATTEMPTS:3}
    retry-backoff-ms: ${CHAT_HTTP_RETRY_BACKOFF_MS:200}

notification:
  provider: ${NOTIFICATION_PROVIDER:fake}
  http:
    base-url: ${NOTIFICATION_HTTP_BASE_URL:}
    api-key: ${NOTIFICATION_HTTP_API_KEY:}
    connect-timeout-ms: ${NOTIFICATION_HTTP_CONNECT_TIMEOUT_MS:2000}
    read-timeout-ms: ${NOTIFICATION_HTTP_READ_TIMEOUT_MS:4000}
    retry-attempts: ${NOTIFICATION_HTTP_RETRY_ATTEMPTS:3}
    retry-backoff-ms: ${NOTIFICATION_HTTP_RETRY_BACKOFF_MS:200}

email:
  provider: ${EMAIL_PROVIDER:fake}
  from: ${EMAIL_FROM:noreply@cheonjiyeon.com}

sms:
  provider: ${SMS_PROVIDER:fake}
  aligo:
    api-key: ${ALIGO_API_KEY:}
    user-id: ${ALIGO_USER_ID:}
    sender: ${ALIGO_SENDER:010-0000-0000}

oauth:
  provider: ${OAUTH_PROVIDER:fake}
  kakao:
    client-id: ${OAUTH_KAKAO_CLIENT_ID:}
    client-secret: ${OAUTH_KAKAO_CLIENT_SECRET:}
  naver:
    client-id: ${OAUTH_NAVER_CLIENT_ID:}
    client-secret: ${OAUTH_NAVER_CLIENT_SECRET:}

portone:
  enabled: ${PORTONE_ENABLED:false}
  api-key: ${PORTONE_API_KEY:}
  api-secret: ${PORTONE_API_SECRET:}
  store-id: ${PORTONE_STORE_ID:}
  webhook-secret: ${PORTONE_WEBHOOK_SECRET:}
  base-url: ${PORTONE_BASE_URL:https://api.portone.io}
  connect-timeout-ms: ${PORTONE_CONNECT_TIMEOUT_MS:3000}
  read-timeout-ms: ${PORTONE_READ_TIMEOUT_MS:5000}

sendbird:
  enabled: ${SENDBIRD_ENABLED:false}
  app-id: ${SENDBIRD_APP_ID:}
  api-token: ${SENDBIRD_API_TOKEN:}
  base-url: ${SENDBIRD_BASE_URL:https://api-${SENDBIRD_APP_ID}.sendbird.com}
  connect-timeout-ms: ${SENDBIRD_CONNECT_TIMEOUT_MS:3000}
  read-timeout-ms: ${SENDBIRD_READ_TIMEOUT_MS:5000}

redis:
  enabled: ${REDIS_ENABLED:false}
  lock:
    wait-time-ms: ${REDIS_LOCK_WAIT_TIME_MS:5000}
    lease-time-ms: ${REDIS_LOCK_LEASE_TIME_MS:10000}

scheduler:
  enabled: ${SCHEDULER_ENABLED:true}
  payment-retry-cron: ${SCHEDULER_PAYMENT_RETRY_CRON:0 */5 * * * ?}
  cache-refresh-cron: ${SCHEDULER_CACHE_REFRESH_CRON:0 0 */1 * * ?}
  session-auto-terminate-cron: ${SCHEDULER_SESSION_AUTO_TERMINATE_CRON:0 */5 * * * ?}

app:
  frontend-base-url: ${FRONTEND_BASE_URL:http://localhost:3000}

cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000}

server:
  port: ${SERVER_PORT:8080}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when_authorized
  metrics:
    tags:
      application: cheonjiyeon-api
